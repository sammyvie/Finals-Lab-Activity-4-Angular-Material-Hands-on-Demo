<div [class.dark-mode]="isDarkMode" class="theme-container">
  <div class="registration-container">

    <div class="toggle-box">
      <mat-slide-toggle (change)="toggleTheme()" color="warn">
        {{ isDarkMode ? 'Dark Mode' : 'Light Mode' }}
      </mat-slide-toggle>
    </div>

    <mat-card class="custom-card">
      <mat-card-header>
        <mat-card-title><h1>TECH ORG REGISTRATION</h1></mat-card-title>
      </mat-card-header>

      <mat-card-content>
        <form [formGroup]="formdata" (ngSubmit)="onClickSubmit()">

          <mat-form-field appearance="outline">
            <mat-label>Username</mat-label>
            <mat-icon matPrefix>person</mat-icon>
            <input matInput formControlName="userName">
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Email</mat-label>
            <mat-icon matPrefix>email</mat-icon>
            <input matInput type="email" formControlName="email" placeholder="email@example.com">
            @if (formdata.get('email')?.invalid && formdata.get('email')?.touched) {
              <mat-error>Please enter a valid email.</mat-error>
            }
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Password</mat-label>
            <mat-icon matPrefix>lock</mat-icon>
            <input matInput type="password" formControlName="password">
            @if (formdata.get('password')?.hasError('pattern')) {
              <mat-error>Must start with a letter and be alphanumeric.</mat-error>
            }
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Membership Status</mat-label>
            <mat-select formControlName="status">
              <mat-option value="Active Member">Active Member</mat-option>
              <mat-option value="Inactive Member">Inactive Member</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Birth Date</mat-label>
            <input matInput [matDatepicker]="picker" [max]="maxDate" formControlName="birthDate">
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
            @if (formdata.get('birthDate')?.hasError('tooYoung')) {
              <mat-error>Must be born in 2006 or earlier.</mat-error>
            }
          </mat-form-field>

          <div class="slider-box">
            <label class="slider-label">Angular Skill Level: {{ formdata.get('angularSkillLevel')?.value }}</label>
            <mat-slider min="1" max="10" step="1" discrete>
              <input matSliderThumb formControlName="angularSkillLevel">
            </mat-slider>
          </div>

          <button mat-raised-button color="primary" type="submit" [disabled]="formdata.invalid">
            Submit Registration
          </button>

          <div style="margin-top: 10px; font-size: 10px; color: gray;">
            Form Status: {{ formdata.status }}
          </div>

        </form>

        @if (submittedData) {
          <div class="result-box">
            <p><strong>Success!</strong> Welcome, {{ submittedData.userName }}.</p>
          </div>
        }
      </mat-card-content>
    </mat-card>
  </div>
</div>
